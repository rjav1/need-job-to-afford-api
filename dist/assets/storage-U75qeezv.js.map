{"version":3,"file":"storage-U75qeezv.js","sources":["../../src/lib/types.ts","../../src/lib/storage.ts"],"sourcesContent":["// ====================\n// Job Source Types\n// ====================\n\nexport type JobSource = 'greenhouse' | 'workday' | 'github' | 'handshake' | 'manual';\nexport type JobType = 'full-time' | 'part-time' | 'internship' | 'contract' | 'unknown';\nexport type ExperienceLevel = 'entry' | 'mid' | 'senior' | 'lead' | 'unknown';\n\nexport interface Job {\n  // Core identifiers\n  id: string;\n  source: JobSource;\n  sourceId: string;  // Original ID from the source\n  \n  // Company info\n  company: string;\n  companyLogo?: string;\n  companyUrl?: string;\n  \n  // Job details\n  title: string;\n  description: string;\n  shortDescription?: string;\n  \n  // Location\n  location: string;\n  isRemote: boolean;\n  \n  // Classification\n  jobType: JobType;\n  experienceLevel: ExperienceLevel;\n  department?: string;\n  team?: string;\n  \n  // Requirements\n  skills?: string[];\n  requirements?: string[];\n  qualifications?: string[];\n  \n  // Compensation\n  salary?: {\n    min?: number;\n    max?: number;\n    currency: string;\n    period: 'hourly' | 'yearly';\n  };\n  \n  // Application\n  applicationUrl: string;\n  applicationDeadline?: string;\n  \n  // Metadata\n  postedAt?: string;\n  updatedAt?: string;\n  scrapedAt: string;\n  \n  // For tracking\n  tags?: string[];\n  sponsorsVisa?: boolean;\n}\n\nexport interface JobSearchParams {\n  keywords?: string[];\n  location?: string;\n  remote?: boolean;\n  jobType?: JobType;\n  experienceLevel?: ExperienceLevel;\n  companies?: string[];\n  limit?: number;\n}\n\nexport interface JobSourceResult {\n  jobs: Job[];\n  source: JobSource;\n  fetchedAt: string;\n  hasMore: boolean;\n  nextCursor?: string;\n  error?: string;\n}\n\n// ====================\n// User Profile Types\n// ====================\n\n// User profile data\nexport interface UserProfile {\n  // Personal Info\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone: string;\n  \n  // Address\n  address: string;\n  city: string;\n  state: string;\n  zipCode: string;\n  country: string;\n  \n  // Links\n  linkedinUrl: string;\n  githubUrl: string;\n  portfolioUrl: string;\n  \n  // Education\n  university: string;\n  degree: string;\n  major: string;\n  gpa: string;\n  graduationDate: string;\n  \n  // Work\n  workAuthorization: 'us_citizen' | 'permanent_resident' | 'visa' | 'other';\n  yearsOfExperience: string;\n  \n  // Resume\n  resumeText: string;\n  resumeFileName: string;\n  \n  // Skills\n  skills: string[];\n  \n  // Projects (for AI to reference)\n  projects: ProjectDescription[];\n}\n\nexport interface ProjectDescription {\n  name: string;\n  description: string;\n  technologies: string[];\n  highlights: string[];\n}\n\n// Form field detection\nexport interface DetectedField {\n  element: HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement;\n  fieldType: FieldType;\n  label: string;\n  isRequired: boolean;\n  confidence: number;\n}\n\nexport type FieldType = \n  | 'firstName'\n  | 'lastName'\n  | 'fullName'\n  | 'email'\n  | 'phone'\n  | 'address'\n  | 'city'\n  | 'state'\n  | 'zipCode'\n  | 'country'\n  | 'linkedin'\n  | 'github'\n  | 'portfolio'\n  | 'university'\n  | 'degree'\n  | 'major'\n  | 'gpa'\n  | 'graduationDate'\n  | 'workAuthorization'\n  | 'yearsOfExperience'\n  | 'resume'\n  | 'coverLetter'\n  | 'openEnded'\n  | 'unknown';\n\n// AI Response request\nexport interface AIResponseRequest {\n  question: string;\n  companyName: string;\n  jobTitle: string;\n  userProfile: UserProfile;\n  maxLength?: number;\n}\n\n// Application tracking\nexport interface ApplicationRecord {\n  id: string;\n  companyName: string;\n  jobTitle: string;\n  jobUrl: string;\n  appliedAt: string;\n  status: 'applied' | 'in_progress' | 'saved';\n  aiResponsesUsed: string[];\n}\n\n// Resume variant types\nexport type ResumeFormat = 'docx' | 'latex' | 'pdf';\n\nexport interface ResumeVariantMetadata {\n  id: string;\n  name: string;\n  tags: string[];\n  format: ResumeFormat;\n  fileName: string;\n  fileSize: number;\n  createdAt: string;\n  updatedAt: string;\n  isDefault: boolean;\n  isOneOff: boolean;  // One-off slots can be overwritten\n  oneOffSlot?: string;  // Slot name for one-off resumes (e.g., \"quick-edit\")\n}\n\nexport interface ResumeVariant extends ResumeVariantMetadata {\n  fileData: ArrayBuffer;\n}\n\nexport interface ResumeCollection {\n  variants: ResumeVariantMetadata[];\n  defaultId: string | null;\n  oneOffSlots: Record<string, string>;  // slotName -> resumeId\n}\n\n// Storage keys\nexport const STORAGE_KEYS = {\n  USER_PROFILE: 'userProfile',\n  APPLICATIONS: 'applications',\n  API_KEY: 'apiKey',\n  AI_PROVIDER: 'aiProvider',\n  SETTINGS: 'settings',\n  RESUME_COLLECTION: 'resumeCollection',\n} as const;\n\n// Settings\nexport interface Settings {\n  aiProvider: 'openai' | 'anthropic' | 'discord';\n  autoFillEnabled: boolean;\n  showPreviewBeforeFill: boolean;\n  darkMode: boolean;\n  noAiMode: boolean;  // Use only templates, no API calls\n  preferTemplates: boolean;  // Try templates before AI to save costs\n  testMode: boolean;  // Discord-based testing mode (Ronald responds)\n  webhookEnabled: boolean;  // Send Discord webhook on successful fill\n  webhookUrl: string;  // Custom webhook URL (optional)\n}\n\nexport const DEFAULT_WEBHOOK_URL = 'https://discord.com/api/webhooks/1470479336296419419/j4NJFVqVzBq9OScJC5YVdJn9k8GlmvzEWUOajYOSrQal3kga2afu_PiH9eyqv8oDD9iC';\n\nexport const DEFAULT_SETTINGS: Settings = {\n  aiProvider: 'openai',\n  autoFillEnabled: true,\n  showPreviewBeforeFill: true,\n  darkMode: false,\n  noAiMode: false,\n  preferTemplates: true,\n  testMode: false,\n  webhookEnabled: true,\n  webhookUrl: DEFAULT_WEBHOOK_URL,\n};\n\nexport const DEFAULT_PROFILE: UserProfile = {\n  firstName: '',\n  lastName: '',\n  email: '',\n  phone: '',\n  address: '',\n  city: '',\n  state: '',\n  zipCode: '',\n  country: 'United States',\n  linkedinUrl: '',\n  githubUrl: '',\n  portfolioUrl: '',\n  university: '',\n  degree: '',\n  major: '',\n  gpa: '',\n  graduationDate: '',\n  workAuthorization: 'us_citizen',\n  yearsOfExperience: '',\n  resumeText: '',\n  resumeFileName: '',\n  skills: [],\n  projects: [],\n};\n","import { \n  UserProfile, \n  ApplicationRecord, \n  Settings, \n  STORAGE_KEYS,\n  DEFAULT_SETTINGS,\n  DEFAULT_PROFILE \n} from './types';\n\n// Chrome storage wrapper with type safety\nexport const storage = {\n  // User Profile\n  async getProfile(): Promise<UserProfile> {\n    const result = await chrome.storage.local.get(STORAGE_KEYS.USER_PROFILE);\n    return result[STORAGE_KEYS.USER_PROFILE] || DEFAULT_PROFILE;\n  },\n\n  async saveProfile(profile: UserProfile): Promise<void> {\n    await chrome.storage.local.set({ [STORAGE_KEYS.USER_PROFILE]: profile });\n  },\n\n  // API Key\n  async getApiKey(): Promise<string> {\n    const result = await chrome.storage.local.get(STORAGE_KEYS.API_KEY);\n    return result[STORAGE_KEYS.API_KEY] || '';\n  },\n\n  async saveApiKey(key: string): Promise<void> {\n    await chrome.storage.local.set({ [STORAGE_KEYS.API_KEY]: key });\n  },\n\n  // Settings\n  async getSettings(): Promise<Settings> {\n    const result = await chrome.storage.local.get(STORAGE_KEYS.SETTINGS);\n    return { ...DEFAULT_SETTINGS, ...result[STORAGE_KEYS.SETTINGS] };\n  },\n\n  async saveSettings(settings: Settings): Promise<void> {\n    await chrome.storage.local.set({ [STORAGE_KEYS.SETTINGS]: settings });\n  },\n\n  // Applications\n  async getApplications(): Promise<ApplicationRecord[]> {\n    const result = await chrome.storage.local.get(STORAGE_KEYS.APPLICATIONS);\n    return result[STORAGE_KEYS.APPLICATIONS] || [];\n  },\n\n  async saveApplication(app: ApplicationRecord): Promise<void> {\n    const apps = await this.getApplications();\n    const existing = apps.findIndex(a => a.id === app.id);\n    if (existing >= 0) {\n      apps[existing] = app;\n    } else {\n      apps.unshift(app);\n    }\n    await chrome.storage.local.set({ [STORAGE_KEYS.APPLICATIONS]: apps });\n  },\n\n  async deleteApplication(id: string): Promise<void> {\n    const apps = await this.getApplications();\n    const filtered = apps.filter(a => a.id !== id);\n    await chrome.storage.local.set({ [STORAGE_KEYS.APPLICATIONS]: filtered });\n  },\n\n  // Clear all data\n  async clearAll(): Promise<void> {\n    await chrome.storage.local.clear();\n  },\n};\n\n// Generate unique ID\nexport function generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n"],"names":[],"mappings":"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"}